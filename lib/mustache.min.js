(function(i){var t=function(){function s(a){return(""+a).replace(/&(?!\w+;)|[<>"']/g,function(a){return i[a]||a})}var m=Object.prototype.toString;Array.isArray=Array.isArray||function(a){return"[object Array]"==m.call(a)};var g=String.prototype.trim,h;if(g)h=function(a){return null==a?"":g.call(a)};else{var n,o;/\S/.test("\u00a0")?(n=/^[\s\xA0]+/,o=/[\s\xA0]+$/):(n=/^\s+/,o=/\s+$/);h=function(a){return null==a?"":a.toString().replace(n,"").replace(o,"")}}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;", "'":"&#39;"},q={},r=function(){};r.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,c,b,d){if(!d)this.context=c,this.buffer=[];if(this.includes("",a)){var a=this.render_pragmas(a),e=this.render_section(a,c,b);!1===e&&(e=this.render_tags(a,c,b,d));if(d)return e;this.sendLines(e)}else{if(d)return a;this.send(a)}},send:function(a){""!==a&&this.buffer.push(a)},sendLines:function(a){if(a)for(var a=a.split("\n"),c=0;c<a.length;c++)this.send(a[c])}, render_pragmas:function(a){if(!this.includes("%",a))return a;var c=this,b=this.getCachedRegex("render_pragmas",function(a,c){return RegExp(a+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+c,"g")});return a.replace(b,function(a,b,j){if(!c.pragmas_implemented[b])throw{message:"This implementation of mustache doesn't understand the '"+b+"' pragma"};c.pragmas[b]={};j&&(a=j.split("="),c.pragmas[b][a[0]]=a[1]);return""})},render_partial:function(a,c,b){a=h(a);if(!b||void 0===b[a])throw{message:"unknown_partial '"+a+"'"}; return!c||"object"!=typeof c[a]?this.render(b[a],c,b,!0):this.render(b[a],c[a],b,!0)},render_section:function(a,c,b){if(!this.includes("#",a)&&!this.includes("^",a))return!1;var d=this,e=this.getCachedRegex("render_section",function(a,b){return RegExp("^([\\s\\S]*?)"+a+"(\\^|\\#)\\s*(.+)\\s*"+b+"\n*([\\s\\S]*?)"+a+"\\/\\s*\\3\\s*"+b+"\\s*([\\s\\S]*)$","g")});return a.replace(e,function(a,e,g,f,k,l){var a=e?d.render_tags(e,c,b,!0):"",l=l?d.render(l,c,b,!0):"",p,f=d.find(f,c);"^"===g?p=!f||Array.isArray(f)&& 0===f.length?d.render(k,c,b,!0):"":"#"===g&&(p=Array.isArray(f)?d.map(f,function(a){return d.render(k,d.create_context(a),b,!0)}).join(""):d.is_object(f)?d.render(k,d.create_context(f),b,!0):"function"==typeof f?f.call(c,k,function(a){return d.render(a,c,b,!0)}):f?d.render(k,c,b,!0):"");return a+p+l})},render_tags:function(a,c,b,d){for(var e=this,j=function(){return e.getCachedRegex("render_tags",function(a,b){return RegExp(a+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+b+"+","g")})},g=j(),h=function(a,d,f){switch(d){case "!":return""; case "=":return e.set_delimiters(f),g=j(),"";case ">":return e.render_partial(f,c,b);case "{":case "&":return e.find(f,c);default:return s(e.find(f,c))}},a=a.split("\n"),f=0;f<a.length;f++)a[f]=a[f].replace(g,h,this),d||this.send(a[f]);if(d)return a.join("\n")},set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){if(!arguments.callee.sRE)arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)", "g");return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,c){function b(a){return!1===a||0===a||a}var a=h(a),d;if(a.match(/([a-z_]+)\./ig)){var e=this.walk_context(a,c);b(e)&&(d=e)}else b(c[a])?d=c[a]:b(this.context[a])&&(d=this.context[a]);return"function"==typeof d?d.apply(c):void 0!==d?d:""},walk_context:function(a,c){for(var b=a.split("."),d=void 0!=c[b[0]]?c:this.context,e=d[b.shift()];void 0!=e&&0<b.length;)d=e,e=e[b.shift()];return"function"==typeof e?e.apply(d):e},includes:function(a, c){return-1!=c.indexOf(this.otag+a)},create_context:function(a){if(this.is_object(a))return a;var c=".";if(this.pragmas["IMPLICIT-ITERATOR"])c=this.pragmas["IMPLICIT-ITERATOR"].iterator;var b={};b[c]=a;return b},is_object:function(a){return a&&"object"==typeof a},map:function(a,c){if("function"==typeof a.map)return a.map(c);for(var b=[],d=a.length,e=0;e<d;e++)b.push(c(a[e]));return b},getCachedRegex:function(a,c){var b=q[this.otag];b||(b=q[this.otag]={});var d=b[this.ctag];d||(d=b[this.ctag]={}); (b=d[a])||(b=d[a]=c(this.otag,this.ctag));return b}};return{name:"mustache.js",version:"0.5.0-dev",to_html:function(a,c,b,d){var e=new r;if(d)e.send=d;e.render(a,c||{},b);if(!d)return e.buffer.join("\n")}}}();i.mustache=function(i,m,g){return t.to_html(i,m,g)}})(jQuery);
